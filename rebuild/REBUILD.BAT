@ECHO OFF
:INIT_ENVIRONMENT
CALL INITENV.BAT
:PRE_POST_CLEANUP
ECHO Pre Cleanup of Post Cleanup
DEL .\INCLUDE\WINEXT.H >NUL
RMDIR .\INCLUDE >NUL
DEL HYPEROID.C >NUL
DEL HYPEROID.H >NUL
DEL HYPEROID.RC >NUL
DEL ROIDSUPP.C >NUL
:PRE_CLEANUP
ECHO Pre Cleanup
DEL HYPEROID.ASM >NUL
DEL HYPEROID.COD >NUL
DEL HYPEROID.BAK >NUL
REN HYPEROID.EXE HYPEROID.BAK >NUL
DEL HYPEROID.HDR >NUL
DEL HYPEROID.LST >NUL
DEL HYPEROID.MAP >NUL
DEL HYPEROID.OBJ >NUL
DEL HYPEROID.RES >NUL
DEL REBUILD.LOG >NUL
DEL ROIDSUPP.ASM >NUL
DEL ROIDSUPP.COD >NUL
DEL ROIDSUPP.LST >NUL
DEL ROIDSUPP.OBJ >NUL
:PRE_INIT
ECHO Pre Init
MKDIR .\INCLUDE >NUL
COPY ..\HYPEROID\WINEXT.H .\INCLUDE >NUL
COPY ..\HYPEROID\HYPEROID.C . >NUL
COPY ..\HYPEROID\HYPEROID.H . >NUL
COPY ..\HYPEROID\HYPEROID.RC . >NUL
COPY ..\HYPEROID\ROIDSUPP.C . >NUL
:BUILD
ECHO CL
CL /nologo /c /Fa /AM /Gw /G2 /W3 /I".\INCLUDE" HYPEROID.C ROIDSUPP.C 2>&1 >> REBUILD.LOG
ECHO RC Step 1/2
RC -i"..\HYPEROID" -r HYPEROID.RC >> REBUILD.LOG
ECHO LINK
LINK /NOD /A:16 /INF /M HYPEROID ROIDSUPP,HYPEROID,HYPEROID,MLIBCEW LIBW,HYPEROID >> REBUILD.LOG
ECHO RC Step 2/2
RC HYPEROID.RES >> REBUILD.LOG
ECHO EXEHDR
EXEHDR /VERBOSE HYPEROID.EXE > HYPEROID.HDR
:POST_CLEANUP
ECHO Post Cleanup
DEL .\INCLUDE\WINEXT.H >NUL
RMDIR .\INCLUDE >NUL
DEL HYPEROID.C >NUL
DEL HYPEROID.H >NUL
DEL HYPEROID.RC >NUL
DEL ROIDSUPP.C >NUL
:DONE
ECHO Done
